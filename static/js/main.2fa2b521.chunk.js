(this.webpackJsonpnfl_pbp_sql=this.webpackJsonpnfl_pbp_sql||[]).push([[0],{143:function(e,t,n){},144:function(e,t,n){},149:function(e,t){},151:function(e,t){},161:function(e,t){},163:function(e,t){},190:function(e,t){},191:function(e,t){},196:function(e,t){},198:function(e,t){},205:function(e,t){},224:function(e,t){},266:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(131),i=n.n(s),o=(n(143),n(9)),a=(n(144),n(132)),l=n.n(a),u=n(137),j=n(49),b=n(76),d=n(31),h=n(135),O=n(136),p=(n(257),n(258),n(130),n(259),n(260),n(261),n(32)),m=n(4),x=n(50),f=n(1),y=[{desc:"Most passing TD at home this year",query:'select player_name, sum(passing_td) as "passing td" from player_games where at_home group by player_name having sum(passing_td) > 0 order by sum(passing_td) desc'},{desc:"Fantasy points scored by a team",query:"select team, sum(total_points) from player_games group by team order by sum(total_points) desc"},{desc:"Fantasy points allowed by a team",query:"select player_opponent, sum(total_points) from player_games group by player_opponent order by sum(total_points) desc"},{desc:"Players with negative fantasy points",query:"select player_name, sum(total_points) from player_games group by player_name having sum(total_points) < 0 order by sum(total_points) asc"},{desc:"Total fantasy points scored per week",query:"select week, sum(total_points) from player_games group by week order by sum(total_points) desc"}];function v(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.b,{to:"/db?dbURL=ff_2021.sqlite",children:"Superflex SQL"}),Object(f.jsx)(p.b,{to:"/db?dbURL=pbp_2021.sqlite",children:"NFL PBP data"})]})}function g(){var e=Object(p.c)(),t=Object(o.a)(e,1)[0].get("dbURL");return Object(f.jsx)(_,{dbURL:"./".concat(t)})}function _(e){var t=e.dbURL,n=Object(c.useState)(null),r=Object(o.a)(n,2),s=r[0],i=r[1],a=Object(c.useState)(null),u=Object(o.a)(a,2),j=u[0],b=u[1],d=Object(c.useState)(null),h=Object(o.a)(d,2),O=h[0],p=h[1],m=Object(c.useState)([]),x=Object(o.a)(m,2),y=x[0],v=x[1],g=Object(c.useState)([]),_=Object(o.a)(g,2),w=_[0],S=_[1],k=Object(c.useState)(""),L=Object(o.a)(k,2),R=L[0],N=L[1];return Object(c.useEffect)((function(){l()({locateFile:function(){return"./sql-wasm.wasm"}}).then((function(e){fetch(t).then((function(e){return e.arrayBuffer()})).then((function(t){return i(new e.Database(new Uint8Array(t)))})).catch((function(e){return b(e)}))}))}),[t]),Object(c.useEffect)((function(){if(s)try{S(null===s||void 0===s?void 0:s.exec("SELECT * FROM sqlite_schema")),p(null)}catch(e){v([]),p(e.message)}}),[s]),Object(c.useEffect)((function(){if(s&&R)try{v(null===s||void 0===s?void 0:s.exec(R)),p(null)}catch(e){v([]),p(e.message)}}),[R,s]),j?Object(f.jsxs)("div",{children:["Error: ",JSON.stringify(j)]}):null===s?Object(f.jsx)("div",{children:"Loading..."}):Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:"layout-grid",children:[Object(f.jsxs)("div",{className:"left-col-wrapper",children:[Object(f.jsx)(C,{onSubmit:N}),Object(f.jsx)(U,{schemaQueryResult:w})]}),y[0]&&Object(f.jsx)(q,{results:y[0]}),O&&Object(f.jsx)("div",{children:Object(f.jsx)(F,{error:O})}),Object(f.jsx)("div",{}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:["Data from"," ",Object(f.jsx)("a",{href:"https://github.com/hvpkod/NFL-Data",children:"https://github.com/hvpkod/NFL-Data"})]}),Object(f.jsxs)("div",{children:["post on"," ",Object(f.jsx)("a",{href:"https://www.reddit.com/r/fantasyfootball/comments/qmlcvm/how_about_some_raw_data/",children:"reddit"})]})]}),Object(f.jsx)("div",{})]})]})})}function q(e){var t=e.results;if(!t)return null;var n=t.columns,c=t.values;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"results-table-scroll-wrapper",children:Object(f.jsx)(R,{children:Object(f.jsx)(L,{children:Object(f.jsxs)("tbody",{children:[Object(f.jsx)("tr",{children:n.map((function(e,t){return Object(f.jsx)("th",{children:e},t)}))}),c.map((function(e,t){return Object(f.jsx)("tr",{className:"result-row",children:e.map((function(e,t){return Object(f.jsx)("td",{children:e||0},t)}))},t)}))]})})})}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{children:t&&Object(f.jsx)("button",{type:"button",onClick:function(){return e=t,Object(O.saveAs)(new Blob([N(e)]),"download.tsv");var e},children:"Download TSV"})})]})}var w={tables:{games:["col_A","col_B","col_C"],players:["other_columns1","other_columns2"]},disableKeywords:!0,completeSingle:!1,completeOnSingleClick:!1},S={mime:"text/x-sql",mode:{name:"sql"},extraKeys:{"Ctrl-Space":"autocomplete"},hint:d.hint.sql,hintOptions:w,lineWrapping:!0,lineNumbers:!0,showCursorWhenSelecting:!0};function C(e){var t=e.onSubmit,n=Object(p.c)(),r=Object(o.a)(n,1)[0],s=Object(c.useState)(!1),i=Object(o.a)(s,2),a=i[0],l=i[1],j=Object(u.a)({initialValues:{query:r.get("query")?decodeURIComponent(r.get("query")):y[0].query},onSubmit:function(e){return t(e.query)}}),d=Object(c.useCallback)((function(){j.setFieldValue("query",Object(b.format)(j.values.query))}),[j]);return Object(f.jsxs)(f.Fragment,{children:[a&&Object(f.jsxs)("div",{className:"show-share-link",children:[Object(f.jsx)("div",{style:{cursor:"pointer",textAlign:"right"},onClick:function(){return l(!1)},children:"X"}),Object(f.jsx)("h1",{children:"Share your query by sending this link"}),Object(f.jsx)("div",{style:{padding:"10px"},children:window.location+"&query=".concat(encodeURIComponent(j.values.query))}),Object(f.jsx)("button",{onClick:function(){navigator.clipboard.writeText(window.location+"&query=".concat(encodeURIComponent(j.values.query)))},children:"Copy to clipboard"})]}),Object(f.jsx)("h1",{children:"Superflex SQL"}),Object(f.jsxs)("form",{onSubmit:j.handleSubmit,children:[Object(f.jsx)(h.Controlled,{options:S,value:j.values.query,onBeforeChange:function(e,t,n){j.setFieldValue("query",n),e.showHint(w)}}),Object(f.jsxs)("div",{className:"button-wrapper",children:[Object(f.jsx)("button",{type:"submit",children:"Run Query"}),Object(f.jsx)("button",{type:"button",onClick:d,children:"Format Query"}),Object(f.jsx)("button",{type:"button",onClick:function(){return l(!a)},children:"Share Query URL"})]}),Object(f.jsx)(T,{onSelect:function(e){return j.setFieldValue("query",Object(b.format)(e))}})]})]})}function F(e){var t=e.error;return Object(f.jsxs)("div",{children:[Object(f.jsx)(k,{children:"SQL Error!"}),Object(f.jsx)(k,{children:t})]})}var k=j.a.div({color:"red"}),L=j.a.table({textAlign:"center",border:"1px solid black"}),R=j.a.div({marginTop:"12px",maxWidth:"100%",boxSizing:"border-box"});function N(e){var t=[e.columns.join("\t")];return(t=t.concat(e.values.map((function(e){return e.join("\t")})))).join("\n")}function U(e){var t=e.schemaQueryResult;if(t.length<1)return Object(f.jsx)("div",{});var n=t[0].values.map((function(e){var t=Object(o.a)(e,5),n=(t[0],t[1]),c=(t[2],t[3],t[4]);return Object(f.jsx)(E,{name:n,sql:c},n)}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Table information"}),Object(f.jsx)("div",{children:n})]})}function E(e){var t=e.name,n=e.sql,r=Object(c.useMemo)((function(){var e=n.substring(n.indexOf("(")+1,n.lastIndexOf(")")).trim(),t=/,$/;return e.split("\n").map((function(e){return e.trim().replace(t,"").split(" ")}))}),[n]);return Object(f.jsx)("div",{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(x.b,{children:Object(f.jsx)("b",{children:t})}),Object(f.jsx)(x.c,{children:r.map((function(e){return Object(f.jsxs)("div",{children:[e[0]," ",Object(f.jsx)(Q,{type:e[1]})]},e[0])}))})]})})}function Q(e){var t=e.type;return Object(f.jsx)("b",{children:t})}function T(e){var t=e.onSelect;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Example Queries"}),Object(f.jsx)("div",{children:y.map((function(e,n){var c=e.desc,r=e.query;return Object(f.jsx)("button",{type:"button",className:"example-query",onClick:function(){return t(r)},children:c},n)}))})]})}var B=function(){return Object(f.jsx)(p.a,{basename:"/nfl_pbp_sql",children:Object(f.jsxs)(m.c,{children:[Object(f.jsx)(m.a,{path:"/",element:Object(f.jsx)(v,{})}),Object(f.jsx)(m.a,{path:"/db",element:Object(f.jsx)(g,{})})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,267)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),s(e),i(e)}))};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(B,{})}),document.getElementById("root")),D()}},[[266,1,2]]]);
//# sourceMappingURL=main.2fa2b521.chunk.js.map